<div class="mt-8 text-center"></div>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperledger Fabric - Bruno Soares Ver√≠ssimo - Trabalho Pr√°tico 01: Sistemas
Distribu√≠dos
</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Calm Tech Neutrals -->
    <!-- Application Structure Plan: The definitive version, integrating 100% of the source PDF's text. To manage the increased text density without sacrificing UI clarity, "Leia Mais" (Read More) toggles are implemented for detailed sections. This preserves the scannable, high-level overview while providing access to the full, unabridged content on demand. The structure remains a guided journey, but now each stop contains the complete, in-depth information from the original report, making it a true 1-to-1 interactive recreation. -->
    <!-- Visualization & Content Choices: 
        - MAJOR ENHANCEMENT - Full Text Integration: All descriptive text from the PDF has been integrated. For long sections, a JS-powered "Leia Mais" toggle shows a summary first and allows the user to expand to the full text. This applies to component descriptions, deployment details, and the case study narrative.
        - The unified animated architecture/transaction flow diagram is kept as the central interactive element.
        - The on-demand glossary, resilience simulation, and other interactive elements are all maintained to support the complete textual content.
        - The goal is zero information loss from the source PDF, presented in the most digestible interactive format possible.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        @import url('https://rsms.me/inter/inter.css');
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .nav-link { transition: color 0.3s; }
        .nav-link:hover { color: #0369a1; }
        
        .diag-org { border: 2px dashed #94a3b8; padding: 1rem; border-radius: 0.5rem; position: relative; }
        .diag-component { border: 2px solid #0ea5e9; background-color: #f0f9ff; padding: 0.75rem; border-radius: 0.5rem; text-align: center; cursor: pointer; transition: all 0.2s ease-in-out; position: relative; z-index: 10; }
        .diag-component.active, .diag-component:hover { background-color: #e0f2fe; border-color: #0284c7; transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        
        .flow-arrow {
            position: absolute;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            color: #ef4444;
            font-weight: bold;
            font-size: 0.875rem;
            padding: 2px 6px;
            border-radius: 4px;
            background-color: white;
            border: 1px solid #ef4444;
            z-index: 20;
            pointer-events: none;
        }
        .flow-arrow.visible { opacity: 1; }
        
        #glossary-modal { transition: opacity 0.3s ease, visibility 0.3s ease; }

        .expandable-content {
            max-height: 100px;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
            position: relative;
        }
        .expandable-content::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: linear-gradient(to top, rgb(248 250 252), transparent);
            pointer-events: none;
        }
        .expandable-content.expanded {
            max-height: 1000px; /* Adjust as needed */
        }
        .expandable-content.expanded::after {
            display: none;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-xl font-bold text-slate-900">Hyperledger Fabric</div>
            <div class="hidden lg:flex space-x-8">
                <a href="#overview" class="nav-link text-slate-600">Vis√£o Geral</a>
                <a href="#how-it-works" class="nav-link text-slate-600">Como Funciona</a>
                <a href="#deployment" class="nav-link text-slate-600">Implanta√ß√£o</a>
                <a href="#fault-tolerance" class="nav-link text-slate-600">Toler√¢ncia a Falhas</a>
                <a href="#case-study" class="nav-link text-slate-600">Estudo de Caso</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-12">
        
        <section id="overview" class="text-center py-12 md:py-20">
            <h1 class="text-4xl md:text-6xl font-extrabold text-slate-900 mb-4">Hyperledger Fabric - Bruno Soares Ver√≠ssimo </h1>
            <p class="text-lg md:text-xl text-slate-600 max-w-4xl mx-auto">Trabalho Pr√°tico 01: Sistemas Distribu√≠dos, explorando em profundidade a arquitetura, implanta√ß√£o, consenso e robustez do Hyperledger Fabric.</p>
            
            <div class="mt-16 text-left bg-white p-8 rounded-lg shadow-md border">
                <h3 class="text-2xl font-bold text-sky-800 mb-4">1. O que √© Blockchain?</h3>
                <p class="text-slate-700 leading-relaxed">De forma simplificada, uma blockchain √© um livro-raz√£o (ledger) digital, distribu√≠do e imut√°vel. Em vez de ser mantido por uma autoridade central (como um banco ou um governo), ele √© compartilhado e sincronizado entre m√∫ltiplos computadores em uma rede ponto-a-ponto (P2P). <br><br> Os seus princ√≠pios fundamentais s√£o:</p>
                <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                     <div class="bg-slate-50 p-6 rounded-lg border">
                        <h4 class="font-bold text-lg text-slate-800">Descentraliza√ß√£o</h4>
                        <p class="text-slate-600 mt-2">N√£o h√° um ponto √∫nico de falha ou controle. A confian√ßa √© estabelecida por meio de consenso criptogr√°fico e colabora√ß√£o entre os participantes da rede.</p>
                    </div>
                     <div class="bg-slate-50 p-6 rounded-lg border">
                        <h4 class="font-bold text-lg text-slate-800">Imutabilidade</h4>
                        <p class="text-slate-600 mt-2">As transa√ß√µes s√£o agrupadas em "blocos" e cada bloco √© criptograficamente ligado ao anterior, formando uma "cadeia". Uma vez que um bloco √© adicionado √† cadeia, √© extremamente dif√≠cil alter√°-lo sem invalidar todos os blocos subsequentes, o que garante a integridade dos registros.</p>
                    </div>
                     <div class="bg-slate-50 p-6 rounded-lg border">
                        <h4 class="font-bold text-lg text-slate-800">Transpar√™ncia</h4>
                        <p class="text-slate-600 mt-2">Todos os participantes da rede (autorizados) possuem uma c√≥pia do mesmo livro-raz√£o, o que permite visibilidade e auditabilidade das transa√ß√µes registradas.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="how-it-works" class="py-12 md:py-20">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900">2. Como Funciona?</h2>
                <p class="mt-2 text-lg text-slate-600 max-w-3xl mx-auto">Esta se√ß√£o combina a arquitetura e o fluxo de transa√ß√µes em uma √∫nica experi√™ncia interativa. Use os controles para animar o fluxo de dados sobre os componentes da rede e clique em cada componente para ver sua descri√ß√£o detalhada.</p>
            </div>

            <div class="bg-white p-8 rounded-lg shadow-lg border border-slate-200">
                <h3 class="text-2xl font-bold text-center mb-4">Arquitetura e Fluxo de Transa√ß√£o Animado</h3>
                <div id="step-description" class="text-center text-lg text-slate-700 mb-8 p-4 bg-sky-50 rounded-md border border-sky-200 min-h-[80px]"></div>

                <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                    <div id="architecture-diagram" class="lg:col-span-3 relative">
                        <div class="space-y-4">
                            <div class="diag-org">
                                <h4 class="font-bold text-slate-700 mb-2">Cliente</h4>
                                <div id="diag-client" class="diag-component border-green-500" data-component="client">Aplica√ß√£o Cliente</div>
                            </div>
                            <div class="diag-org">
                                <h4 class="font-bold text-slate-700 mb-2">Organiza√ß√£o 1</h4>
                                <div class="diag-component mt-4" data-component="peers">Peer 0 (Endorser) + Ledger</div>
                            </div>
                            <div class="diag-org mt-4 border-sky-500">
                                <div id="diag-orderer" class="diag-component" data-component="orderers">Servi√ßo de Ordena√ß√£o (Raft)</div>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-2 bg-slate-50 p-6 rounded-md border border-slate-200 min-h-[300px] self-start">
                        <h4 class="text-xl font-bold text-center mb-4">Detalhes do Componente</h4>
                        <div id="component-info-container">
                             <div class="component-info" data-cid="client">
                                <h5 class="text-xl font-bold text-green-800 mb-2">Aplica√ß√£o Cliente</h5>
                                <p class="text-slate-700">A aplica√ß√£o que inicia o fluxo, construindo e enviando propostas de transa√ß√£o para a rede em nome de um usu√°rio.</p>
                            </div>
                            <div class="component-info active" data-cid="peers">
                                <h5 class="text-xl font-bold text-sky-800 mb-2">Peers (Pares)</h5>
                                <p class="text-slate-700">S√£o os n√≥s fundamentais da rede. Eles hospedam c√≥pias do livro-raz√£o e inst√¢ncias dos contratos inteligentes (chaincode). Existem dois tipos de peers: <strong>Endorsing Peers</strong>, que recebem uma proposta de transa√ß√£o, a simulam e, se v√°lida, a "endossam" (assinam digitalmente); e <strong>Committing Peers</strong>, que recebem os blocos j√° ordenados e validam cada transa√ß√£o antes de adicion√°-las √† sua c√≥pia do ledger. Todo endorsing peer √© tamb√©m um committing peer.</p>
                            </div>
                            <div class="component-info" data-cid="orderers">
                                <h5 class="text-xl font-bold text-sky-800 mb-2">Orderers (Ordenadores)</h5>
                                <p class="text-slate-700">S√£o respons√°veis por criar uma ordem total das transa√ß√µes endossadas. Eles recebem as transa√ß√µes de m√∫ltiplos clientes, as ordenam em blocos e as enviam para os peers. Usam um protocolo de consenso (como o Raft) para garantir a consist√™ncia, oferecendo toler√¢ncia a falhas.</p>
                            </div>
                            <div class="component-info" data-cid="cas">
                                <h5 class="text-xl font-bold text-sky-800 mb-2">Certificate Authorities (CAs)</h5>
                                <p class="text-slate-700">S√£o respons√°veis por gerenciar as identidades digitais da rede. Emitem certificados que associam uma identidade (usu√°rio, peer, etc.) a uma organiza√ß√£o espec√≠fica, formando a base do Membership Service Provider (MSP).</p>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="flex justify-between items-center mt-8 pt-4 border-t">
                    <button id="prev-step" class="px-6 py-2 bg-slate-200 text-slate-800 rounded-md hover:bg-slate-300 transition disabled:opacity-50">Anterior</button>
                    <div id="step-indicator" class="font-semibold">Passo 0 de 4</div>
                    <button id="next-step" class="px-6 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 transition">Pr√≥ximo</button>
                </div>
                <img src="arquitetura.png" alt="Diagrama de Arquitetura do Hyperledger Fabric" class="mt-2 w-3/4 h-auto mx-auto rounded-lg shadow-md">
            </div>
        </section>

        <section id="deployment" class="py-12 md:py-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900">3. Instala√ß√£o e Implanta√ß√£o</h2>
                <p class="mt-2 text-lg text-slate-600 max-w-3xl mx-auto">O Fabric √© projetado para ser implantado em ambientes distribu√≠dos usando cont√™ineres. Veja as abordagens para desenvolvimento e produ√ß√£o.</p>
            </div>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-lg shadow-lg border border-slate-200">
                    <div class="flex items-center gap-4 mb-4"><div class="mx-auto bg-sky-100 h-16 w-16 rounded-full flex items-center justify-center"><span class="text-3xl">üíª</span></div><h3 class="text-2xl font-bold">Desenvolvimento Local</h3></div>
                    <div class="expandable-content"><p class="text-slate-700">Para aprendizado e desenvolvimento, o Hyperledger Fabric fornece o reposit√≥rio `fabric-samples`, que cont√©m a **Test Network**. Esta rede √© facilmente iniciada com scripts que usam **Docker Compose** para orquestrar os cont√™ineres de peers, orderers e CAs em uma √∫nica m√°quina. √â o ponto de partida ideal para desenvolver e testar chaincodes.</p></div>
                    <button class="expand-btn mt-2 text-sky-600 font-semibold">Leia Mais</button>
                </div>
                <div class="bg-white p-8 rounded-lg shadow-lg border border-slate-200">
                     <div class="flex items-center gap-4 mb-4"><div class="mx-auto bg-sky-100 h-16 w-16 rounded-full flex items-center justify-center"><span class="text-3xl">‚òÅÔ∏è</span></div><h3 class="text-2xl font-bold">Produ√ß√£o em Nuvem</h3></div>
                    <div class="expandable-content"><p class="text-slate-700">Para um ambiente de produ√ß√£o ou para este trabalho pr√°tico, a implanta√ß√£o deve ser feita em um cluster de m√°quinas em uma nuvem p√∫blica (AWS, Azure, Google Cloud). A abordagem padr√£o da ind√∫stria √©:
                    <br>1. Provisionar um **Cluster Kubernetes**: Utilizar um servi√ßo gerenciado como Azure Kubernetes Service (AKS) ou Google Kubernetes Engine (GKE).
                    <br>2. Usar **Helm Charts**: O Helm, um gerenciador de pacotes para Kubernetes, automatiza a implanta√ß√£o de cada componente do Fabric como um conjunto de Pods e Services.
                    <br>3. Configurar **Persist√™ncia e Rede**: Configurar volumes persistentes para que os dados do ledger n√£o sejam perdidos e expor os servi√ßos de forma segura usando Ingress Controllers ou Load Balancers.</p></div>
                     <button class="expand-btn mt-2 text-sky-600 font-semibold">Leia Mais</button>
                </div>
            </div>
        </section>

        <section id="fault-tolerance" class="py-12 md:py-20">
             <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900">4. Toler√¢ncia a Falhas</h2>
                <p class="mt-2 text-lg text-slate-600 max-w-3xl mx-auto">A toler√¢ncia a falhas √© um recurso avan√ßado e valorizado, obtido pela combina√ß√£o do Fabric e do orquestrador. A robustez √© cr√≠tica e √© uma responsabilidade compartilhada.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-lg shadow-lg border border-slate-200">
                    <h3 class="text-2xl font-bold mb-4">N√≠vel do Orquestrador (Kubernetes)</h3>
                    <p class="text-slate-700">O Kubernetes garante a toler√¢ncia a falhas da infraestrutura. Se um cont√™iner (Pod) de um peer falhar, o Kubernetes automaticamente o reiniciar√°.</p>
                </div>
                <div class="bg-white p-8 rounded-lg shadow-lg border border-slate-200">
                    <h3 class="text-2xl font-bold mb-4">N√≠vel do Middleware (Fabric)</h3>
                    <p class="text-slate-700">O Fabric garante a toler√¢ncia a falhas do servi√ßo de consenso. Ao configurar o Servi√ßo de Ordena√ß√£o com o protocolo **Raft**, √© poss√≠vel ter um cluster de ordenadores (ex: 3 ou 5 n√≥s). A rede pode tolerar a falha de alguns desses n√≥s (menos da metade) sem interromper o servi√ßo de ordena√ß√£o de transa√ß√µes.</p>
                </div>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-lg mt-12 border border-slate-200">
                 <h3 class="text-2xl font-bold text-center mb-2">Consenso: CFT vs. BFT e o Problema dos Generais Bizantinos</h3>
                 <p class="text-slate-600 text-center mb-8">O Problema dos Generais Bizantinos √© uma analogia para o desafio de alcan√ßar consenso em uma rede com componentes n√£o confi√°veis. O Fabric, por ser uma rede permissionada, opta pelo protocolo Raft (Crash Fault Tolerance - CFT), que √© mais perform√°tico e adequado para ambientes onde n√£o se espera comportamento malicioso (Byzantine Faults), apenas falhas operacionais.</p>
                 <div class="chart-container">
                    <canvas id="consensus-chart"></canvas>
                 </div>
            </div>
        </section>

        <section id="case-study" class="py-12 md:py-20">
             <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900">5. Estudo de Caso: Rastreabilidade de Leite</h2>
                <p class="mt-2 text-lg text-slate-600 max-w-3xl mx-auto">Uma prova de conceito para rastrear uma cadeia produtiva de leite, validando os conceitos do Fabric na pr√°tica.</p>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-lg border border-slate-200 mb-8 space-y-6">
                 <div>
                    <h3 class="text-2xl font-bold mb-4">Conceito e Arquitetura da Rede</h3>
                     <div class="expandable-content"><p class="text-slate-700">Este projeto implementou uma prova de conceito para o rastreamento de uma cadeia produtiva de leite utilizando a plataforma Hyperledger Fabric. A arquitetura da solu√ß√£o foi constru√≠da sobre a test-network padr√£o do Fabric, que simula um ambiente de neg√≥cios real com m√∫ltiplas organiza√ß√µes. O objetivo principal foi demonstrar como essas entidades, que n√£o necessariamente confiam umas nas outras, podem compartilhar informa√ß√µes de forma segura e transparente em um ledger distribu√≠do e imut√°vel.<br><br>A rede configurada consiste em: Duas Organiza√ß√µes de Peers (Org1 e Org2), cada uma com seu pr√≥prio peer. No nosso cen√°rio, a Org1 assume o papel de Produtor Rural, enquanto a Org2 representa o Latic√≠nio. E uma Organiza√ß√£o de Ordena√ß√£o, respons√°vel por ordenar as transa√ß√µes.</p></div>
                    <button class="expand-btn mt-2 text-sky-600 font-semibold">Leia Mais</button>
                 </div>
                 <div>
                    <h3 class="text-2xl font-bold mb-4">O Chaincode: MilkChaincode</h3>
                     <p class="text-slate-700">O cora√ß√£o da aplica√ß√£o √© o contrato inteligente (chaincode) MilkChaincode, desenvolvido em Go. Ele define a l√≥gica de neg√≥cios e as regras para a manipula√ß√£o dos ativos na rede.</p>
                     <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4">
                         <div class="bg-slate-50 p-4 rounded-lg border">
                            <h4 class="font-bold">Estrutura do Ativo: MilkLot</h4>
                            <div class="font-mono text-sm mt-2 bg-slate-800 text-white p-3 rounded">{ ID, OriginFarm, ProductionDate, QuantityLiters, Status }</div>
                         </div>
                          <div class="bg-slate-50 p-4 rounded-lg border">
                            <h4 class="font-bold">Fun√ß√µes Implementadas</h4>
                            <ul class="list-disc list-inside mt-2 text-slate-600">
                                <li><b>RegisterLot:</b> Permite que o Produtor (Org1) crie o registro inicial de um lote.</li>
                                <li><b>UpdateStatus:</b> Permite aos participantes atualizarem o status de um lote.</li>
                                <li><b>GetLot(id):</b> Retorna o estado completo e atual de um lote espec√≠fico.</li>
                                 <li><b>GetAllLots():</b> Retorna uma lista de todos os lotes de leite j√° registrados.</li>
                            </ul>
                         </div>
                     </div>
                 </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4">Testes, Valida√ß√£o e Resili√™ncia</h3>
                     <div class="expandable-content"><p class="text-slate-700">A aplica√ß√£o foi rigorosamente testada atrav√©s da interface de linha de comando (CLI) do Fabric, simulando intera√ß√µes reais entre as organiza√ß√µes. O fluxo validado incluiu a cria√ß√£o, consulta e atualiza√ß√£o de um ativo. Um dos testes mais cr√≠ticos foi o de resili√™ncia: o cont√™iner do `peer0.org1.example.com` foi deliberadamente parado. Mesmo com o peer offline, uma consulta direcionada ao `peer0.org2.example.com` foi processada com sucesso, provando que a rede permaneceu operacional. Posteriormente, o peer reiniciado sincronizou automaticamente os blocos que perdeu, validando a capacidade de recupera√ß√£o do sistema.</p></div>
                    <button class="expand-btn mt-2 text-sky-600 font-semibold">Leia Mais</button>
                 </div>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-lg border border-slate-200">
                <h3 class="text-2xl font-bold mb-8 text-center">Conclus√£o e Pr√≥ximos Passos (Roadmap)</h3>
                <p class="text-center text-slate-600 mb-10">A implementa√ß√£o atual provou com sucesso a viabilidade do uso de Hyperledger Fabric para um sistema de rastreabilidade de suprimentos. Foi demonstrado na pr√°tica como criar, atualizar e consultar ativos em uma rede com m√∫ltiplas organiza√ß√µes, al√©m de validar a robustez e a toler√¢ncia a falhas da arquitetura.</p>
                <div class="relative">
                    <!-- The road -->
                    <div class="absolute left-1/2 top-0 h-full w-1 bg-slate-200 rounded -translate-x-1/2"></div>
                    <!-- Roadmap items -->
                    <div class="relative mb-8 flex justify-end">
                        <div class="absolute left-1/2 -translate-x-1/2 w-8 h-8 bg-sky-600 rounded-full border-4 border-white"></div>
                        <div class="w-1/2 pl-8 text-left">
                             <div class="p-4 bg-slate-100 rounded-lg">
                                <h4 class="font-bold">Controle de Acesso</h4>
                                <p>Refinar o chaincode para que apenas organiza√ß√µes espec√≠ficas possam chamar certas fun√ß√µes (ex: somente o Latic√≠nio pode invocar uma fun√ß√£o de processamento).</p>
                            </div>
                        </div>
                    </div>
                    <div class="relative mb-8">
                        <div class="absolute left-1/2 -translate-x-1/2 w-8 h-8 bg-sky-600 rounded-full border-4 border-white"></div>
                        <div class="w-1/2 pr-8 text-right">
                             <div class="p-4 bg-slate-100 rounded-lg">
                                <h4 class="font-bold">Expans√£o da Rede</h4>
                                <p>Adicionar uma terceira organiza√ß√£o para o Varejista, completando o ciclo da cadeia de suprimentos.</p>
                            </div>
                        </div>
                    </div>
                     <div class="relative">
                        <div class="absolute left-1/2 -translate-x-1/2 w-8 h-8 bg-sky-600 rounded-full border-4 border-white"></div>
                        <div class="w-1/2 pl-8 text-left ml-auto">
                            <div class="p-4 bg-slate-100 rounded-lg">
                                <h4 class="font-bold">Fun√ß√µes Adicionais</h4>
                                <p>Implementar a fun√ß√£o `DeleteLot` e uma fun√ß√£o de hist√≥rico mais detalhada, como `GetHistoryForLot`.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
    </main>

    <div id="glossary-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 invisible opacity-0">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 class="text-2xl font-bold">Gloss√°rio de Termos</h3>
                <button id="close-glossary" class="text-3xl leading-none">&times;</button>
            </div>
            <div class="p-6 space-y-4">
                <div><h4 class="font-bold text-sky-700">Chaincode</h4><p>O contrato inteligente no Hyperledger Fabric; a l√≥gica de neg√≥cio que define os ativos e as transa√ß√µes.</p></div>
                <div><h4 class="font-bold text-sky-700">Ledger (Livro-Raz√£o)</h4><p>Composto pelo World State (o estado atual dos dados) e a Blockchain (o hist√≥rico imut√°vel de transa√ß√µes).</p></div>
                <div><h4 class="font-bold text-sky-700">MSP (Membership Service Provider)</h4><p>O componente que gerencia as identidades e permiss√µes da rede, associando participantes a certificados digitais emitidos por uma CA.</p></div>
                <div><h4 class="font-bold text-sky-700">Peer (Par)</h4><p>Um n√≥ da rede que hospeda o ledger e o chaincode. Pode ser um Endorser (que simula e assina transa√ß√µes) ou um Committer (que valida e grava blocos).</p></div>
                <div><h4 class="font-bold text-sky-700">Orderer (Ordenador)</h4><p>Um n√≥ (ou cluster de n√≥s) respons√°vel por criar uma ordem cronol√≥gica das transa√ß√µes e empacot√°-las em blocos. Usa um protocolo de consenso como o Raft.</p></div>
                 <div><h4 class="font-bold text-sky-700">Raft</h4><p>Um protocolo de consenso do tipo CFT (Crash Fault Tolerant), baseado em um modelo de l√≠der-seguidor, usado pelo servi√ßo de ordena√ß√£o para garantir a consist√™ncia.</p></div>
            </div>
        </div>
    </div>

    <button id="open-glossary" class="fixed bottom-6 right-6 bg-sky-600 text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center text-3xl z-50 hover:bg-sky-700 transition">?
    </button>

    <footer class="bg-slate-800 text-slate-300 mt-20">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>Baseado no relat√≥rio "Trabalho Pr√°tico 01: Sistemas Distribu√≠dos" de Bruno Soares Ver√≠ssimo.</p>
            <p>Portal Interativo gerado em 16 de junho de 2025.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const stepDescriptions = [
                "Clique em 'Pr√≥ximo' para iniciar a anima√ß√£o do fluxo de transa√ß√£o.",
                "FASE 1: EXECUTE - A Aplica√ß√£o Cliente cria uma proposta e a envia ao Peer Endossante para simula√ß√£o e assinatura (endosso).",
                "FASE 2: ORDER - O Cliente envia a transa√ß√£o endossada para o Servi√ßo de Ordena√ß√£o, que a coloca em uma ordem cronol√≥gica e a empacota em um bloco.",
                "FASE 3: VALIDATE - O Ordenador distribui o bloco a todos os peers, que validam cada transa√ß√£o antes de aplic√°-la em seu ledger.",
                "FIM: A transa√ß√£o foi validada e registrada de forma imut√°vel no ledger de cada peer na rede."
            ];

            let currentStep = 0;
            const totalSteps = 4;
            const nextBtn = document.getElementById('next-step');
            const prevBtn = document.getElementById('prev-step');
            const stepIndicator = document.getElementById('step-indicator');
            const stepDescriptionEl = document.getElementById('step-description');
            
            function createArrow(id, fromEl, toEl, text) {
                const diagram = document.getElementById('architecture-diagram');
                if (!diagram || !fromEl || !toEl) return;
                
                const arrow = document.createElement('div');
                arrow.id = id;
                arrow.className = 'flow-arrow';
                arrow.textContent = text;
                diagram.appendChild(arrow);
                
                const fromRect = fromEl.getBoundingClientRect();
                const toRect = toEl.getBoundingClientRect();
                const diagramRect = diagram.getBoundingClientRect();

                let startX, startY, endX, endY;

                if (fromRect.bottom < toRect.top) { // Downwards
                    startX = fromRect.left + fromRect.width / 2 - diagramRect.left;
                    startY = fromRect.bottom - diagramRect.top;
                } else { // Sideways
                    startX = fromRect.right - diagramRect.left;
                    startY = fromRect.top + fromRect.height / 2 - diagramRect.top;
                }
                
                endX = toRect.left + toRect.width / 2 - diagramRect.left;
                endY = toRect.top - diagramRect.top;
                
                arrow.style.left = `${startX}px`;
                arrow.style.top = `${startY + 5}px`;
                arrow.style.transformOrigin = 'left center';
                
                const dx = endX - startX;
                const dy = endY - startY;
                const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                
                setTimeout(() => {
                    arrow.style.transform = `translate(10px, -50%)`;
                    arrow.classList.add('visible');
                }, 50);
            }

            function updateFlowAnimation() {
                const diagram = document.getElementById('architecture-diagram');
                diagram.querySelectorAll('.flow-arrow').forEach(a => a.remove());

                const clientEl = document.getElementById('diag-client');
                const peer1El = document.querySelectorAll('.diag-component[data-component="peers"]')[0];
                const ordererEl = document.getElementById('diag-orderer');
                
                document.querySelectorAll('.diag-component').forEach(c => c.classList.remove('ring-4', 'ring-red-400', 'ring-offset-2'));
                
                if (currentStep === 1) {
                    createArrow('arrow1', clientEl, peer1El, '1. Proposta');
                    clientEl.classList.add('ring-4', 'ring-red-400', 'ring-offset-2');
                    peer1El.classList.add('ring-4', 'ring-red-400', 'ring-offset-2');
                } else if (currentStep === 2) {
                    createArrow('arrow2', clientEl, ordererEl, '2. Tx Endossada');
                     clientEl.classList.add('ring-4', 'ring-red-400', 'ring-offset-2');
                    ordererEl.classList.add('ring-4', 'ring-red-400', 'ring-offset-2');
                } else if (currentStep === 3) {
                     createArrow('arrow3', ordererEl, peer1El, '3. Bloco');
                     ordererEl.classList.add('ring-4', 'ring-red-400', 'ring-offset-2');
                     peer1El.classList.add('ring-4', 'ring-red-400', 'ring-offset-2');
                }
            }

            function updateStepView() {
                stepIndicator.textContent = `Passo ${currentStep} de ${totalSteps}`;
                stepDescriptionEl.textContent = stepDescriptions[currentStep];
                prevBtn.disabled = currentStep === 0;
                nextBtn.disabled = currentStep === totalSteps;
                updateFlowAnimation();
            }

            nextBtn.addEventListener('click', () => { if (currentStep < totalSteps) { currentStep++; updateStepView(); } });
            prevBtn.addEventListener('click', () => { if (currentStep > 0) { currentStep--; updateStepView(); } });

            function setupComponentInfoClick() {
                document.querySelectorAll('.diag-component').forEach(comp => {
                    comp.addEventListener('click', (e) => {
                        const componentId = e.currentTarget.dataset.component;
                        document.querySelectorAll('.component-info').forEach(info => info.classList.remove('active'));
                        const activeInfo = document.querySelector(`.component-info[data-cid="${componentId}"]`);
                        if(activeInfo) activeInfo.classList.add('active');
                    });
                });
            }
            
            function setupExpandableContent() {
                document.querySelectorAll('.expand-btn').forEach(button => {
                    button.addEventListener('click', () => {
                        const content = button.previousElementSibling;
                        content.classList.toggle('expanded');
                        if (content.classList.contains('expanded')) {
                            button.textContent = 'Leia Menos';
                        } else {
                            button.textContent = 'Leia Mais';
                        }
                    });
                });
            }
            
            function setupGlossary() {
                const modal = document.getElementById('glossary-modal');
                const openBtn = document.getElementById('open-glossary');
                const closeBtn = document.getElementById('close-glossary');
                openBtn.addEventListener('click', () => { modal.classList.remove('invisible', 'opacity-0'); });
                closeBtn.addEventListener('click', () => { modal.classList.add('invisible', 'opacity-0'); });
            }
            
            function setupConsensusChart() {
                const ctx = document.getElementById('consensus-chart')?.getContext('2d');
                if(!ctx) return;
                new Chart(ctx, { type: 'bar', data: { labels: ['CFT (Raft)', 'BFT'], datasets: [{ label: 'Complexidade', data: [2, 5], backgroundColor: 'rgba(56, 189, 248, 0.6)'}, { label: 'Performance Relativa', data: [8, 4], backgroundColor: 'rgba(34, 197, 94, 0.6)'}] }, options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } } } });
            }

            function setupSmoothScrolling() {
                 document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { e.preventDefault(); const target = document.querySelector(this.getAttribute('href')); if(target) { target.scrollIntoView({ behavior: 'smooth' }); } }); });
            }

            // Initialize all components
            updateStepView();
            setupComponentInfoClick();
            setupConsensusChart();
            setupSmoothScrolling();
            setupGlossary();
            setupExpandableContent();
        });
    </script>
</body>
</html>
